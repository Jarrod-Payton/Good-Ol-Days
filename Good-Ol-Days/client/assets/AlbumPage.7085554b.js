import{h as g,c,u as M,w as I,i as P,a as y,o as s,b as d,d as t,j as u,e as w,F as k,l as x,q as B,s as j,y as q,n as A}from"./vendor.1f0f8e3c.js";import{_ as D,s as N,a as S,c as R,p,l as f,b as V,r as F,f as Q,A as l}from"./index.82ce7ab5.js";const Z={setup(){const v=g(""),a=g(!1),m=g([]);document.title="Good Ol' Days | Album";const o=c(()=>l.user),b=g([]),_=M();return I(()=>{b.value=[...l.posts],b.value=b.value.splice(2,l.posts.length)}),P(async()=>{try{N.joinAlbumRoom(_.params.albumId),await S.getMessages(_.params.albumId),await S.setActiveAlbum(_.params.albumId),o.isAuthenticated&&await R.getChallenges(),await p.getPosts(_.params.albumId)}catch(n){f.error(n)}}),I(async()=>{try{o.isAuthenticated&&_.params.albumId&&await V.getCollabThisAlbum(_.params.albumId)}catch(n){f.error(n)}}),{que:m,downloading:a,splicedPosts:b,generalSort:v,posts1:c(()=>l.posts.slice(0,2)),activeAlbum:c(()=>l.activeAlbum),activeChallenge:c(()=>l.activeChallenge),user:c(()=>l.user),account:c(()=>l.account),collabThisAlbum:c(()=>l.collabThisAlbum),posts:c(()=>l.posts),doneSyncing:c(()=>l.doneSyncing),activePost:c(()=>l.activePost),setActive(n){p.setActive(n),F.openPhotoModal()},downloadMode(){a.value=!a.value},addToQue(n){m.value.find(h=>h.id===n.id)?m.value=m.value.filter(h=>h.id!==n.id):m.value.push(n)},async downloadImages(){try{await Q.downloadFirebase(m.value,this.activeAlbum.title)}catch(n){f.error(n)}},sort(n){p.sort(n)}}}},r=v=>(B("data-v-1d307e56"),v=v(),j(),v),z={class:"row mt-2 m-0 p-0"},E={class:"col-12 heightDownload"},O={class:"row m-0"},G={class:"col-12 p-0 ps-md-2 mb-md-0 mb-2"},L={class:"d-flex justify-content-start"},H={class:"dropdown"},J=r(()=>t("button",{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown",class:"btn dropdown-toggle btn-primary text-white sort"}," Sort By ",-1)),K={class:"dropdown-menu"},U={key:0},W={key:0},X=r(()=>t("i",{class:"mdi mdi-download downloadIcon"},null,-1)),Y=[X],$={key:1},oo=r(()=>t("i",{class:"mdi mdi-close closeIcon"},null,-1)),eo=[oo],to=q("s "),ao={key:0,class:"col-md-6 order-md-2 p-0 animate__animated animate__fadeIn"},so={class:"col-md-6 order-md-1"},no={key:0,class:"row"},io=["onClick","data-bs-target"],lo=["id","onClick"],co={key:0},ro=r(()=>t("i",{class:"mdi mdi-download downloadIcon"},null,-1)),mo=[ro],_o={key:1},uo=r(()=>t("i",{class:"mdi mdi-close"},null,-1)),vo=[uo],bo={key:1,class:"row justify-content-center"},ho=r(()=>t("div",{class:"col-11 card cardmessage"},[t("p",{class:"message m-0 p-1"}," Add a picture and start creating memories! ")],-1)),wo=[ho],go=["onClick","data-bs-target"],yo=["id","onClick"],Ao={key:0},ko=r(()=>t("i",{class:"mdi mdi-download downloadIcon"},null,-1)),po=[ko],fo={key:1},Co=r(()=>t("i",{class:"mdi mdi-close closeIcon"},null,-1)),Io=[Co];function xo(v,a,m,o,b,_){const n=y("Chatbox"),h=y("Challenge"),C=y("Post"),T=y("ShareAlbumModal");return s(),d(k,null,[t("div",z,[t("div",E,[t("div",O,[t("div",G,[t("div",L,[t("div",H,[J,t("ul",K,[t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:a[0]||(a[0]=e=>o.sort("oldest"))},"Oldest")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:a[1]||(a[1]=e=>o.sort("mostRecent"))},"Most Recent")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:a[2]||(a[2]=e=>o.sort("aToZ"))},"A-Z")]),t("li",null,[t("a",{class:"dropdown-item dropdown-item-text",onClick:a[3]||(a[3]=e=>o.sort("zToA"))},"Z-A")]),o.activeAlbum.hasChallenges?(s(),d("li",U,[t("a",{class:"dropdown-item dropdown-item-text",onClick:a[4]||(a[4]=e=>o.sort("challenges"))},"Challenges")])):u("",!0)])]),t("button",{class:"btn btn-primary text-white elevation-3 ms-4 downloadMode",onClick:a[5]||(a[5]=(...e)=>o.downloadMode&&o.downloadMode(...e)),title:"Download"},[o.downloading?(s(),d("span",$,eo)):(s(),d("span",W,Y))]),w(n,{album:o.activeAlbum},null,8,["album"]),to,o.downloading?(s(),d("button",{key:0,title:"download selected images",class:"btn btn-primary text-white elevation-3 downloadImages ms-2",onClick:a[6]||(a[6]=(...e)=>o.downloadImages&&o.downloadImages(...e))}," Download Images ")):u("",!0)])])])]),o.activeAlbum.hasChallenges&&o.user.isAuthenticated&&o.collabThisAlbum.find(e=>e.accountId===o.account.id&&e.verified)||o.account.id===o.activeAlbum.creatorId&&o.activeAlbum.hasChallenges?(s(),d("div",ao,[w(h)])):u("",!0),t("div",so,[o.posts.length>0?(s(),d("div",no,[(s(!0),d(k,null,x(o.posts1,e=>(s(),d("div",{class:"col-6 rotationanim animate__animated animate__jackInTheBox",key:e.id},[t("div",{onClick:i=>o.setActive(e.id),type:"button","data-bs-toggle":"modal","data-bs-target":e.type.includes("video")?"#video-modal":"#picture-modal",class:A(o.downloading&&!o.que.find(i=>i.id===e.id)?"item disabled":"item selectable1")},[w(C,{post:e},null,8,["post"])],10,io),o.downloading?(s(),d("button",{key:0,title:"add to download",id:e.id+"dlBtn",class:A(o.que.find(i=>i.id===e.id)?"btn btn-primary text-white elevation-3 elevation-3":"btn btn-success text-white elevation-3 elevation-3"),onClick:i=>o.addToQue(e)},[o.que.find(i=>i.id===e.id)?(s(),d("span",_o,vo)):(s(),d("span",co,mo))],10,lo)):u("",!0)]))),128))])):u("",!0),o.posts.length===0&&o.doneSyncing?(s(),d("div",bo,wo)):u("",!0)]),(s(!0),d(k,null,x(o.splicedPosts,e=>(s(),d("div",{class:"col-6 col-md-3 rotationanim order-md-3 animate__animated animate__jackInTheBox",key:e.id},[t("div",{title:"add to download",onClick:i=>o.setActive(e.id),type:"button","data-bs-toggle":"modal","data-bs-target":e.type.includes("video")?"#video-modal":"#picture-modal",class:A(o.downloading&&!o.que.find(i=>i.id===e.id)?"item disabled":"item selectable1")},[w(C,{post:e},null,8,["post"])],10,go),o.downloading?(s(),d("button",{key:0,title:"add to download",id:e.id+"dlBtn",class:A(o.que.find(i=>i.id===e.id)?"btn btn-primary text-white elevation-3":"btn btn-success text-white elevation-3 mb-1"),onClick:i=>o.addToQue(e)},[o.que.find(i=>i.id===e.id)?(s(),d("span",fo,Io)):(s(),d("span",Ao,po))],10,yo)):u("",!0)]))),128))]),w(T,{activeAlbum:o.activeAlbum},null,8,["activeAlbum"])],64)}var Mo=D(Z,[["render",xo],["__scopeId","data-v-1d307e56"]]);export{Mo as default};
